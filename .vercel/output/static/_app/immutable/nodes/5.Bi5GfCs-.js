import"../chunks/Bg9kRutz.js";import{aP as Je,b as Qe,aQ as Be,e as Ie,aR as Ke,j as pe,ak as Ve,aS as Ge,g as s,a as Xe,_ as Ze,U as A,a0 as B,X as R,S as g,al as Ye,T as L,aT as $e,$ as et,V as U,Z as de,f as w,W as k,aU as ye,aV as Z}from"../chunks/gw28AIuH.js";import{d as tt,e as at,s as I}from"../chunks/Dc-MXaS8.js";import{p as rt,a as ue,i as J}from"../chunks/gVk4lvHU.js";import{e as Y,i as he}from"../chunks/BrveUI2Q.js";import{r as st,a as ge,s as be}from"../chunks/CngExaDC.js";import{s as nt,a as ot}from"../chunks/D88xRgpN.js";import{a as it,b as ct,i as lt,c as dt,r as ut}from"../chunks/udz5pEkc.js";function _e(e,a,c){Je(()=>{var n=Qe(()=>a(e,c==null?void 0:c())||{});if(c&&(n!=null&&n.update)){var i=!1,m={};Be(()=>{var f=c();Ie(f),i&&Ke(m,f)&&(m=f,n.update(f))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function vt(e,a){var c=e.__className,n=ft(a);pe&&e.className===n?e.__className=n:(c!==n||pe&&e.className!==n)&&(a==null?e.removeAttribute("class"):e.className=n,e.__className=n)}function ft(e){return e??""}function C(e,a,c){if(c){if(e.classList.contains(a))return;e.classList.add(a)}else{if(!e.classList.contains(a))return;e.classList.remove(a)}}function mt(e){const a=JSON.parse(e);return a.data&&(a.data=it(a.data,ct.decoders)),a}function oe(e){return HTMLElement.prototype.cloneNode.call(e)}function pt(e,a=()=>{}){const c=async({action:i,result:m,reset:f=!0,invalidateAll:p=!0})=>{m.type==="success"&&(f&&HTMLFormElement.prototype.reset.call(e),p&&await lt()),(location.origin+location.pathname===i.origin+i.pathname||m.type==="redirect"||m.type==="error")&&await dt(m)};async function n(i){var j,D,S,O,r;if(((j=i.submitter)!=null&&j.hasAttribute("formmethod")?i.submitter.formMethod:oe(e).method)!=="post")return;i.preventDefault();const f=new URL((D=i.submitter)!=null&&D.hasAttribute("formaction")?i.submitter.formAction:oe(e).action),p=(S=i.submitter)!=null&&S.hasAttribute("formenctype")?i.submitter.formEnctype:oe(e).enctype,y=new FormData(e),M=(O=i.submitter)==null?void 0:O.getAttribute("name");M&&y.append(M,((r=i.submitter)==null?void 0:r.getAttribute("value"))??"");const F=new AbortController;let T=!1;const z=await a({action:f,cancel:()=>T=!0,controller:F,formData:y,formElement:e,submitter:i.submitter})??c;if(T)return;let x;try{const t=new Headers({accept:"application/json","x-sveltekit-action":"true"});p!=="multipart/form-data"&&t.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(p)?p:"application/x-www-form-urlencoded");const l=p==="multipart/form-data"?y:new URLSearchParams(y),d=await fetch(f,{method:"POST",headers:t,cache:"no-store",body:l,signal:F.signal});x=mt(await d.text()),x.type==="error"&&(x.status=d.status)}catch(t){if((t==null?void 0:t.name)==="AbortError")return;x={type:"error",error:t}}await z({action:f,formData:y,formElement:e,update:t=>c({action:f,result:x,reset:t==null?void 0:t.reset,invalidateAll:t==null?void 0:t.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",n)}}}var xe="mz3PUW_p",we=["#FFC700","#FF0000","#2E3191","#41BBC7"],ke=3500,je=.5,Ae=150,Pe="mix",Le=12,Me="",ze=!0,Se=800,Ee=1600;function yt(e,a={}){let{colors:c=we,duration:n=ke,force:i=je,particleCount:m=Ae,particleShape:f=Pe,particleSize:p=Le,particleClass:y=Me,destroyAfterDone:M=ze,stageHeight:F=Se,stageWidth:T=Ee}=a;(function(r){if(document.querySelector("style[data-neoconfetti]"))return;const t=ie("style");t.dataset.neoconfetti="",t.textContent=r,ce(document.head,t)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",F+"px");let H=[],z=[];const x=()=>K(P()*(xt-1)),j=(r,t)=>f!=="rectangles"&&(r==="circles"||wt(t));function D(r,t){const l=x(),d=j(f,l),o=(b,E)=>r.style.setProperty(b,E+"");o("--xlp",le($(He(t,90)-180),0,180,-T/2,T/2)+"px"),o("--dc",n-K(1e3*P())+"ms");const u=P()<gt?Q(P()*bt,2):0;o("--x1",u),o("--x2",-1*u),o("--x3",u),o("--x4",Q($(le($(He(t,90)-180),0,180,-1,1)),4)),o("--y1",Q(P()*Ue,4)),o("--y2",Q(P()*i*(Fe()?1:-1),4)),o("--y3",Ue),o("--y4",Q(_t(le($(t-180),0,180,i,-i),0),4)),o("--w",(d?p:K(4*P())+p/2)+"px"),o("--h",(d?p:K(2*P())+p)+"px");const v=l.toString(2).padStart(3,"0").split("");o("--hr",v.map(b=>+b/2+"").join(" ")),o("--r",v.join(" ")),o("--rd",Q(P()*(ht-We)+We)+"ms"),o("--br",d?"50%":0)}let S;function O(){e.innerHTML="",clearTimeout(S),H=Te(m,c),z=function(r,t=[],l){const d=[];for(const{color:o}of t){const u=ie("div");u.className=`${xe} ${l}`,u.style.setProperty("--bgc",o);const v=ie("div");ce(u,v),ce(r,u),d.push(u)}return d}(e,H,y);for(const[r,t]of Ne(z))D(t,H[+r].degree);S=setTimeout(()=>{M&&(e.innerHTML="")},n)}return O(),{update(r){const t=r.particleCount??Ae,l=r.particleShape??Pe,d=r.particleSize??Le,o=r.particleClass??Me,u=r.colors??we,v=r.stageHeight??Se,b=r.duration??ke,E=r.force??je,h=r.stageWidth??Ee,_=r.destroyAfterDone??ze;H=Te(t,u);let N=!1;if(t===m){z=Array.from(e.querySelectorAll(`.${xe}`));for(const[V,{color:ee}]of Ne(H)){const q=z[+V];JSON.stringify(c)!==JSON.stringify(u)&&q.style.setProperty("--bgc",ee),l!==f&&q.style.setProperty("--br",j(l,x())?"50%":"0"),o!==y&&(y&&q.classList.remove(y),o&&q.classList.add(o))}}else N=!0;M&&!_&&clearTimeout(S),e.style.setProperty("--sh",v+"px"),n=b,c=u,i=E,m=t,f=l,p=d,y=o,M=_,F=v,T=h,N&&O()},destroy(){e.innerHTML="",clearTimeout(S)}}}var We=200,ht=800,gt=.1,bt=.3,Ue=.5,$=Math.abs,P=Math.random,K=Math.round,_t=Math.max,ie=e=>document.createElement(e),ce=(e,a)=>e.appendChild(a),Te=(e,a)=>Array.from({length:e},(c,n)=>({color:a[n%a.length],degree:360*n/e})),Q=(e,a=2)=>K((e+Number.EPSILON)*10**a)/10**a,le=(e,a,c,n,i)=>(e-a)*(i-n)/(c-a)+n,He=(e,a)=>e+a>360?e+a-360:e+a,Fe=()=>P()>.5,Ne=Object.entries,xt=6,wt=e=>e!==1&&Fe();const De="(prefers-reduced-motion: reduce)",kt=()=>window.matchMedia(De).matches,jt=ut(kt(),e=>{{const a=n=>{e(n.matches)},c=window.matchMedia(De);return c.addEventListener("change",a),()=>{c.removeEventListener("change",a)}}});function Ce(e,a,c){var i;e.preventDefault();const n=e.target.getAttribute("data-key");n==="backspace"?(de(a,ue(s(a).slice(0,-1))),(i=c())!=null&&i.badGuess&&c(c().badGuess=!1,!0)):s(a).length<5&&de(a,s(a)+n)}var At=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Pt=L('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Lt=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),Mt=L('<p class="svelte-1pg2j5l"> </p>'),zt=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),St=L('<button formaction="?/update" name="key"> </button>'),Et=L('<div class="row svelte-1pg2j5l"></div>'),Wt=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Ut=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Tt=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Jt(e,a){Ve(a,!0);const c=nt(),n=()=>ot(jt,"$reducedMotion",c);let i=rt(a,"form",15),m=w(()=>a.data.answers.at(-1)==="xxxxx"),f=w(()=>s(m)?-1:a.data.answers.length),p=Ge(ue(a.data.guesses[s(f)]||""));Xe(()=>{de(p,ue(a.data.guesses[s(f)]||""))});let y=w(()=>s(p).length===5);const M=w(()=>{let r={},t={};return a.data.answers.forEach((l,d)=>{const o=a.data.guesses[d];for(let u=0;u<5;u+=1){const v=o[u];l[u]==="x"?(r[v]="exact",t[v]="correct"):r[v]||(r[v]=l[u]==="c"?"close":"missing",t[v]=l[u]==="c"?"present":"absent")}}),{classnames:r,description:t}}),F=w(()=>s(M).classnames),T=w(()=>s(M).description);function H(r){var t;r.metaKey||r.key==="Enter"&&!s(y)||(t=document.querySelector(`[data-key="${r.key}" i]`))==null||t.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var z=Tt();at("keydown",$e,H),Ze(r=>{var t=At();et.title="Sverdle",g(r,t)});var x=A(B(z),2),j=A(U(x),2);Y(j,20,()=>Array.from(Array(6).keys()),r=>r,(r,t)=>{var l=Lt();const d=w(()=>t===s(f));var o=B(l),u=U(o);k(o);var v=A(o,2);Y(v,20,()=>Array.from(Array(5).keys()),b=>b,(b,E)=>{var h=Pt();const _=w(()=>s(d)?s(p):a.data.guesses[t]),N=w(()=>{var W;return(W=a.data.answers[t])==null?void 0:W[E]}),V=w(()=>{var W;return((W=s(_))==null?void 0:W[E])??""}),ee=w(()=>s(d)&&E===s(_).length),q=w(()=>s(N)==="x"),ve=w(()=>s(N)==="c"),fe=w(()=>s(N)==="_");var me=U(h),te=A(me),Oe=U(te);J(Oe,()=>s(q),W=>{var G=Z("(correct)");g(W,G)},W=>{var G=ye(),qe=B(G);J(qe,()=>s(ve),re=>{var X=Z("(present)");g(re,X)},re=>{var X=ye(),Re=B(X);J(Re,()=>s(fe),se=>{var ne=Z("(absent)");g(se,ne)},se=>{var ne=Z("empty");g(se,ne)},!0),g(re,X)},!0),g(W,G)}),k(te);var ae=A(te,2);st(ae),k(h),R(()=>{C(h,"exact",s(q)),C(h,"close",s(ve)),C(h,"missing",s(fe)),C(h,"selected",s(ee)),I(me,`${s(V)??""} `),ae.disabled=!s(d),ge(ae,s(V))}),g(b,h)}),k(v),R(()=>{I(u,`Row ${t+1}`),C(v,"current",s(d))}),g(r,l)}),k(j);var D=A(j,2),S=U(D);J(S,()=>s(m)||a.data.answers.length>=6,r=>{var t=zt(),l=B(t);J(l,()=>!s(m)&&a.data.answer,u=>{var v=Mt(),b=U(v);k(v),R(()=>I(b,`the answer was "${a.data.answer??""}"`)),g(u,v)});var d=A(l,2),o=U(d);k(d),R(()=>I(o,`${(s(m)?"you won :)":"game over :(")??""} play again?`)),g(r,t)},r=>{var t=Wt(),l=U(t),d=A(l,2);d.__click=[Ce,p,i];var o=A(d,2);Y(o,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],he,(u,v)=>{var b=Et();Y(b,21,()=>v,he,(E,h)=>{var _=St();_.__click=[Ce,p,i];var N=U(_,!0);k(_),R(()=>{be(_,"data-key",s(h)),vt(_,`${s(F)[s(h)]??""} svelte-1pg2j5l`),_.disabled=s(y),ge(_,s(h)),be(_,"aria-label",`${s(h)??""} ${(s(T)[s(h)]||"")??""}`),I(N,s(h))}),g(E,_)}),k(b),g(u,b)}),k(t),R(()=>{l.disabled=!s(y),C(l,"selected",s(y))}),g(r,t)}),k(D),k(x),_e(x,(r,t)=>pt(r,t),()=>()=>({update:r})=>{r({reset:!1})});var O=A(x,2);J(O,()=>s(m),r=>{var t=Ut();_e(t,(l,d)=>yt(l,d),()=>({particleCount:n()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),g(r,t)}),R(()=>{var r;C(j,"playing",!s(m)),C(j,"bad-guess",(r=i())==null?void 0:r.badGuess)}),g(e,z),Ye()}tt(["click"]);export{Jt as component};
